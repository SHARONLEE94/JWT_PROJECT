# v2 - JWT를 실제 웹 요청 기반으로 동작하게 만들기

## v2 구조
```scss
root/
 ├── jwtcore/                      ← 기존 그대로 유지 (핵심 로직)
 │   └── src/main/java/com/lab/jwtcore/...
 └── jwtmvc/                       ← 새로 생성 (웹 계층)
     └── src/main/java/com/lab/jwtmvc/
         ├── JwtMvcApplication.java   // 스프링부트 실행 진입점
         └── controller/
             └── AuthController.java  //  API 엔드포인트

```

## step1. Spring MVC 기본 세팅
| 구성요소                         | 역할               | 파일 위치                                              | 설명                                                  |
| ---------------------------- | ---------------- | -------------------------------------------------- | --------------------------------------------------- |
| **루트 `pom.xml`**             | 멀티모듈 관리자         | `/pom.xml`                                         | 전체 프로젝트를 감싸는 상위 POM. 모듈 목록(`jwtcore`, `jwtmvc`)만 포함 |
| **`jwtcore/pom.xml`**        | 핵심 로직 모듈         | `/jwtcore/pom.xml`                                 | JWT 생성, 검증 등 핵심 엔진 모듈. Spring 의존성 없음                |
| **`jwtmvc/pom.xml`**         | Spring Boot 웹 모듈 | `/jwtmvc/pom.xml`                                  | Spring Boot Web 기반 API 서버. `jwtcore`를 참조함           |
| **`JwtMvcApplication.java`** | 스프링 실행 클래스       | `/jwtmvc/src/main/java/com/lab/jwtmvc/`            | 서버 시작점 (`main()` 에서 SpringApplication.run())        |
| **`AuthController.java`**    | REST 컨트롤러        | `/jwtmvc/src/main/java/com/lab/jwtmvc/controller/` | `/api/auth/login`, `/refresh`, `/secure` 엔드포인트 제공   |

-> 추가: 프로젝트 빌드 흐름
```
JWT_PROJECT/
 ├── pom.xml                ← 루트 (멀티모듈 상위)
 ├── jwtcore/
 │    └── pom.xml           ← 핵심 로직
 └── jwtmvc/
      └── pom.xml           ← Spring Boot 웹앱
```
1️⃣ root/pom.xml 은 “두 모듈을 함께 빌드하라”는 관리자
2️⃣ jwtcore 먼저 빌드 → jar 로 생성됨
3️⃣ jwtmvc 는 jwtcore 를 의존성으로 가져다 사용
4️⃣ 실행은 jwtmvc 에서 mvn spring-boot:run

### TDD
- JWT 인증 흐름(/login, /secure, /refresh)을 TDD(Test-Driven Development) 로 검증
- "JUnit5" 사용 (또는 JUnit5 포스트맨에 직접 url 날려서 테스트)
- 통합 테스트(@SpringBootTest) 용어

  | 구분                                  | 내용                                  |
  | ----------------------------------- | ----------------------------------- |
  | `@SpringBootTest`                   | 실제 Spring 컨텍스트 띄워서 통합 테스트           |
  | `@AutoConfigureMockMvc`             | MockMvc를 자동 주입해 실제 HTTP 없이 요청 시뮬레이션 |
  | `MockMvc.perform(...)`              | 컨트롤러에 요청을 보내는 코드                    |
  | `objectMapper.writeValueAsString()` | Java 객체 → JSON 변환                   |
  | `assertThat(...)`                   | 응답 내용 검증                            |


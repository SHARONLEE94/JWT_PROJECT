## 세팅: pom.xml (기본 세팅 + Java 21 + JJWT 의존성 포함)

** 소스 루트(Source Root) 설정
- 프로젝트의 소스 루트를 `src/main/java`로 설정합니다.
- 이 설정이 안되어 있으면 IntelliJ가 Main 클래스를 실행 대상 클래스로 인식 못한다.
- "IntelliJ에서 프로젝트 우클릭 -> Mark Directory as -> Sources Root 선택"
- "File -> Invalidate Caches / Restart... -> Invalidate and Restart"해서 캐시를 초기화

## step1 - JwtUtil.java만들기
- JWT를 실제로 만들고 검증할 핵심 클래스

## step2 - 비밀키 생성 & 구성요소
- JWT 서명을 위한 비밀키 생성
- 일단, 단순히 프로그램 실행 중에만 유효한 키를 만듦.
  (DB나 파일에 저장하는 방법은 추후에 다룸)

JwtUtil.java

  | 코드                         | 의미                      |
  | -------------------------- | ----------------------- |
  | `SignatureAlgorithm.HS256` | HMAC-SHA256 기반의 서명 알고리즘 |
  | `Keys.secretKeyFor(...)`   | 자동으로 랜덤한 비밀키 생성         |
  | `private static final`     | 애플리케이션 전체에서 하나만 유지      |

## step3 - JWT 토큰 생성 메서드 만들기 & 구성요소
- 토큰이 어떻게 만들어지는지 구현

JwtUtil.java

| 항목                             | 설명                         |
| ------------------------------ | -------------------------- |
| `setSubject(userId)`           | 이 토큰이 누구(userId)에 대한 건지 명시 |
| `claim("name", userName)`      | 사용자 이름 같은 추가 정보(payload)   |
| `setIssuedAt`, `setExpiration` | 발급 시간 / 만료 시간              |
| `signWith(key)`                | 우리가 만든 비밀키로 서명             |
| `.compact()`                   | JSON → 실제 JWT 문자열로 변환      |

## step4 - JWT 토큰 검증 메서드 만들기 & 구성요소
| 코드                                    | 의미                           |
| ------------------------------------- | ---------------------------- |
| `.parserBuilder().setSigningKey(key)` | 우리가 생성할 때 사용했던 비밀키로 다시 해독    |
| `.parseClaimsJws(token)`              | 토큰 구조를 해석해서 Payload 추출       |
| `JwtException`                        | 유효하지 않은 토큰일 경우 발생 (만료, 위조 등) |

## step5 - 잘못된 토큰 / 만료 테스트
1. 잘못된 토큰 테스트
- 토큰 문자열의 일부를 변경해서 위조된 토큰을 만들어 "서명 검증 실패(위조된 토큰)"임을 확인
```Java
    String token = JwtUtil.generateToken("user01", "예린");
    System.out.println("Generated JWT Token: " + token);
    
    System.out.println("Invalid Token Test: ");
    JwtUtil.validateToken(token + "x");// 토큰 변조
```

2. 만료된 토큰 테스트
- JwtUtil의 만료 시간을 아주 짧게 설정한 후, 일정 시간 대기 후 토큰 검증 시 "토큰 만료"임을 확인
```java
    String token = JwtUtil.generateToken("user01", "예린");
    System.out.println("Generated JWT Token: " + token);

    JwtUtil.validateToken(token);
    
    try{
        System.out.println("\n 3초 대기 중...");
        Thread.sleep(3000);
    } catch(InterruptedException e) {
        e.printStackTrace();
    }

    System.out.println("2차 검증 - 3초 후");
    JwtUtil.validateToken(token);
```

## Step6 - AuthService 만들기
- JwtUtil을 직접 사용하는 대신, AuthService라는 별도의 클래스를 만들어 
- "로그인-> 토큰 발급 -> 검증" 흐름을 담당하도록 역할 분리